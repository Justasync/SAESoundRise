{% extends "base_template.html.twig" %}

{% block header %}
	{{ parent() }}
	<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
	<style>:root
	{
		--paaxio-turquoise: #2A9D8F;
		--paaxio-background: #fdfaf8;
		--paaxio-card-bg: #E07A5F;
		--paaxio-border: #91c9c4;
		--paaxio-rounded-3xl: 1.5rem;
		--paaxio-text-xs: 0.75rem;
		--paaxio-fw-semibold: 600;
		--paaxio-fw-medium: 500;
	}

	.main-content-container {
		border: 1px solid var(--paaxio-border);
		border-radius: 0.75rem;
		padding-bottom: 3rem;
	}

	.paaxio-card {
		background-color: var(--paaxio-card-bg);
		border-radius: var(--paaxio-rounded-3xl);
		box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
		transition: transform 0.2s;
	}

	.paaxio-card:hover {
		transform: translateY(-3px);
		box-shadow: 0 6px 15px rgba(0, 0, 0, 0.1);
	}

	.artist-scroll-container {
		overflow-x: auto;
		white-space: nowrap;
		padding: 1rem 0;
		-webkit-overflow-scrolling: touch;
	}

	.artist-list-container {
		background-color: var(--paaxio-card-bg);
		border-radius: var(--paaxio-rounded-3xl);
		display: flex;
		justify-content: start;
		padding: 0.5rem 0.75rem;
		width: max-content;
	}

	.artist-item {
		display: inline-block;
		text-align: center;
		margin-right: 1.5rem;
		width: 80px;
	}

	.artist-item:last-child {
		margin-right: 0;
	}

	.artist-avatar {
		width: 80px;
		height: 80px;
		object-fit: cover;
		border-radius: 50%;
		border: 3px solid white;
		box-shadow: 0 2px 5px rgba(0, 0, 0, 0.15);
	}

	.text-xs {
		font-size: var(--paaxio-text-xs);
	}
	.fw-medium {
		font-weight: var(--paaxio-fw-medium);
	}
	.text-gray-700 {
		color: #4b5563;
	}
	.text-gray-500 {
		color: #6b7280;
	}

	.album-cover {
		width: 100%;
		padding-top: 100%;
		position: relative;
		border-radius: 1rem;
		overflow: hidden;
		background-color: #f0f0f0;
		margin-bottom: 0.5rem;
		box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
	}

	.album-cover img {
		position: absolute;
		top: 0;
		left: 0;
		width: 100%;
		height: 100%;
		object-fit: cover;
	}
</style>{% endblock %}{% block content %}
<main class="container-xl py-5">
	<div class="main-content-container bg-white">
		<div class="container-fluid pt-4 pb-2">

			<h1 class="text-center fw-bold mb-4" style="color: var(--paaxio-turquoise);">
				En tendance
			</h1>

			<!-- Section Artistes -->
			<h3 class="text-center fw-semibold mb-4 text-secondary pt-3">Artistes</h3>

			<div class="row mx-auto justify-content-center">
				<div class="col-12">
					<div class="artist-scroll-container">
						<div class="artist-list-container">
							{% if artistes is not empty %}
								{% for artiste in artistes %}
									<div class="artist-item">
										<img src="{{ artiste.urlPhotoUtilisateur ?: 'https://placehold.co/80x80/cccccc/ffffff?text=' ~ artiste.pseudoUtilisateur|first }}" alt="Avatar de {{ artiste.pseudoUtilisateur }}" class="artist-avatar">
										<p class="mt-2 mb-0 text-sm text-center fw-medium text-white">{{ artiste.pseudoUtilisateur }}</p>
									</div>
								{% endfor %}
							{% else %}
								<p class="text-center text-gray-500 p-3">Aucun artiste en tendence.</p>
							{% endif %}
						</div>
					</div>
				</div>
			</div>

			<!-- Section Chansons -->

			<h3 class="text-center fw-semibold mb-4 text-secondary pt-3">Chansons</h3>

			<div class="row mx-auto justify-content-center">
				<div class="col-12">
					{% if chansons is not empty %}
						<style>
							.chanson-scroll-container {
								overflow-x: auto;
								white-space: nowrap;
								padding-bottom: 0.5rem;
								margin-bottom: 1rem;
								/* Hide scrollbar for Chrome, Safari and Opera */
								scrollbar-width: none; /* Firefox */
								-ms-overflow-style: none; /* IE and Edge */
							}
							.chanson-scroll-container::-webkit-scrollbar {
								display: none; /* Chrome, Safari and Opera */
							}
							.chanson-card-list {
								display: flex;
								gap: 1.25rem;
								padding: 0.5rem 0;
								min-width: 200px;
							}
							.chanson-card {
								flex: 0 0 220px;
								background: #f8fafc;
								border-radius: 1rem;
								box-shadow: 0 2px 6px rgba(0, 0, 0, 0.05);
								display: flex;
								flex-direction: column;
								align-items: flex-start;
								padding: 1.25rem;
								min-height: 110px;
								transition: box-shadow 0.15s;
								border: 1px solid #eee;
							}
							.chanson-card:hover {
								box-shadow: 0 4px 16px rgba(0, 0, 0, 0.09);
								border-color: var(--paaxio-card-bg, #E5A88B);
							}
							.chanson-title {
								font-weight: 600;
								font-size: 1.06rem;
								margin-bottom: 0.5em;
								color: var(--paaxio-card-bg, #E5A88B);
								overflow: hidden;
								text-overflow: ellipsis;
								white-space: nowrap;
								width: 100%;
							}
							.chanson-title a {
								color: inherit;
								text-decoration: none;
							}
							.chanson-artist {
								font-size: 0.96rem;
								color: #5a5a5a;
								margin-bottom: 0.3em;
								overflow: hidden;
								text-overflow: ellipsis;
								white-space: nowrap;
								width: 100%;
							}
							.chanson-album-thumb {
								width: 50px;
								height: 50px;
								border-radius: 8px;
								overflow: hidden;
								margin-bottom: 0.5em;
								flex-shrink: 0;
								background: #e0e0e0;
								display: flex;
								align-items: center;
								justify-content: center;
							}
							.chanson-album-thumb img {
								width: 100%;
								height: 100%;
								object-fit: cover;
								display: block;
							}
						</style>
						<div class="chanson-scroll-container">
							<div class="chanson-card-list">
								{% for chanson in chansons %}
									<div class="chanson-card">
										<div
											class="chanson-album-thumb">
											{# Try to get the album cover by several possible structures #}
											{% set album = null %}
											{% if chanson.chanson.albumChanson is defined and chanson.chanson.albumChanson %}
												{% set album = chanson.chanson.albumChanson %}
											{% elseif chanson.chanson.getAlbumChanson is defined and chanson.chanson.getAlbumChanson() %}
												{% set album = chanson.chanson.getAlbumChanson() %}
											{% endif %}
											<img src="{{ album is not null and (album.urlPochetteAlbum is defined and album.urlPochetteAlbum) ? album.urlPochetteAlbum : 'https://placehold.co/50x50/cccccc/333?text=No+Img' }}" alt="Pochette de {{ album and album.nomAlbum is defined ? album.nomAlbum : 'Single' }}">
										</div>
										<div class="chanson-title">
											<a href="/?controller=chanson&method=afficherDetails&idChanson={{ chanson.chanson.idChanson is defined ? chanson.chanson.idChanson : (chanson.chanson.getIdChanson is defined ? chanson.chanson.getIdChanson() : '') }}">
												{{ chanson.chanson.titreChanson }}
											</a>
										</div>
										<div class="chanson-artist">
											{{ chanson.artistePseudo ?: ('Artiste inconnu') }}
										</div>
									</div>
								{% endfor %}
							</div>
						</div>
					{% else %}
						<p class="text-center text-gray-500 p-3">Aucune chanson en tendance.</p>
					{% endif %}
				</div>
			</div>

			<!-- Section Albums/Singles -->
			<h3 class="text-center fw-semibold mt-5 mb-4 text-secondary">Album/Singles</h3>

			<div class="row row-cols-2 row-cols-md-4 g-4 px-2">
				{% if albums is not empty %}
					{% for album in albums %}
						<article class="col">
							<a href="/?controller=album&method=afficherDetails&idAlbum={{ album.idAlbum }}" class="text-decoration-none">
								<div class="paaxio-card p-3 h-100 d-flex flex-column">
									<div class="album-cover">
										<img src="{{ album.urlPochetteAlbum ?: 'https://placehold.co/300x300/cccccc/333?text=No+Image' }}" alt="Pochette de {{ album.nomAlbum }}">
									</div>
									<div class="text-center mt-auto">
										<p class="mb-0 fw-medium text-sm text-white">{{ album.nomAlbum }}</p>
										<p class="text-xs text-white">{{ album.pseudoArtiste }}</p>
									</div>
								</div>
							</a>
						</article>
					{% endfor %}
				{% else %}
					<p class="text-center text-gray-500 col-12">Aucun album en tendence.</p>

				{% endif %}
			</div>
		</div>
	</div>
</main>{% endblock %}{% block script %}
{{ parent() }}
{# Pas de script sp√©cifique pour cette page pour le moment #}{% endblock %}
